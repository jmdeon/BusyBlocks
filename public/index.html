<html ng-app="myApp" >
    <head>
        <!-- Information about the document goes here. This includes the encoding, title, css files, and JS files -->
        <link rel="stylesheet" type="text/css" href="./style.css">
        <link rel="stylesheet" type="text/css" href="bootstrap-3.3.4-dist/css/bootstrap.css">
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width,height=device-height,initial-scale=1.0">	
        <title>Scheduling App</title>


        <!-- Get access to the Parse library -->
		<script type="text/javascript" src="https://parse.com/downloads/javascript/parse-1.4.2.js"></script>

        <!-- Load UI Calendar sources -->
        <link rel="stylesheet" href="lib/bower_components/fullcalendar/dist/fullcalendar.css"/>
        <!-- jquery, moment, and angular have to get included before fullcalendar -->
        <script type="text/javascript" src="lib/bower_components/jquery/dist/jquery.js"></script>
        <script type="text/javascript" src="lib/bower_components/moment/moment.js"></script>
        <script type="text/javascript" src="lib/bower_components/angular/angular.js"></script>
        <script type="text/javascript" src="lib/bower_components/angular-ui-calendar/src/calendar.js"></script>
        <script type="text/javascript" src="lib/bower_components/fullcalendar/dist/fullcalendar.js"></script>
        <script type="text/javascript" src="lib/bower_components/fullcalendar/dist/gcal.js"></script>

        <!-- Load BootStrap -->
        <script type="text/javascript" src="lib/ui-bootstrap-tpls-0.13.0.min.js"></script>

        <!--First Modules -->
        <script src="js/shared/Schedule.js"></script>
        <!-- Modules -->
        <script src="js/app.js"></script>
        <!-- Controllers -->
    	<script src="js/controllers/ProfileController.js"></script>
        <script src="js/controllers/GroupController.js"></script>
        <!-- Services -->
    	<script src="js/services/userService.js"></script>
    	<script src="js/services/groupService.js"></script>

        <!-- Inline JS goes here -->
        <script> 
            /** Global variables **/
            Parse.initialize( "t5hvXf3wJOYnL3MMIffsemMdhLM7f4brACcf0eBa", "UhqQaEDIEQr6cxhO8XS4Fl8BcGU4ir9jL9To7PVO" );
            var currentUser = Parse.User.current();
            if (currentUser) {
            	// do stuff with the user
            } 
            else {
            	// show the signup or login page
            	location.href = "login/login.html";
            }
            
            /* this is how to create a new schedule */
            var sched = new Schedule();
            /* this is how to add events */
            sched.addEvent(0, new Event(0, "EventOne", 3, 4, new Date(), new Date(),false));
            sched.addEvent(0, new Event(0, "EventTwo", 5, 7, new Date(), new Date(),false));
            sched.addEvent(0,new Event(0, "JoeIsKing", 1, 12, new Date(), new Date(),false));
            console.log(sched); //check out the console if you want to see the result
        </script> 
    </head>
    
    <body>
      <!-- PROFILE CONTROLLER -->
      <div ng-controller="ProfileController"> 
        <div id="logoutWrapper">
            <div class="btn-group" dropdown>
                <div class="logoutbtn" ng-show="homeView" dropdown-toggle></div>
                    <ul class="dropdown-menu" role="menu">
                        <li><div ng-click="logout()">Logout</div></li>
                    </ul>
            </div>
            
            <div id="greeting">Hi, {{ userName }}</div>
            <center>
                <div ng-click="profileView=true; groupView=false; $parent.singleGroupView=false" class="viewBtn">Profile</div>
                <div ng-click="groupView=true; profileView=false; $parent.singleGroupView=false" class="viewBtn">Groups</div>
            </center>
        </div>
    
        <div id="homeView" ng-init="homeView=true" ng-show="homeView">     
        	<div ng-init="profileView=true" ng-show="profileView" id="profileView">
            	<div id="profileWrapper">
                    <div id="scheduleWrapper">
                        <p id="yourSched">Your Schedule</p>
                
                        <div class="schedule">
                            <!-- TEST UI CALENDAR -->
                            <div  ng-model="eventSources" calendar='userCalendar' ui-calendar="uiConfig.calendar" view="agendaWeel" ></div>
                            <br><br>
                        </div>
                    </div>
                    
                    <div id="createWrapper">
                        <p id="createTitle">Create Event</p>
                        <div class="createEvent">
                            <p>Event Name</p>
                            <input type="text" class="eventPar" ng-model="newEventName" placeholder="Event Name"><br><br>
                            
                            <p>Start Time</p>
                            <input type="time" class="eventPar" ng-model="newEventStartTime"><br><br>
                            
                            <p>End Time</p>
                            <input type="time" class="eventPar" ng-model="newEventEndTime"><br><br>
                            
                            <p>Start Date</p>
                            <input type="date" class="eventPar" ng-model="newEventStartDate"><br><br>
                            
                            <p>End Date</p>
                            <input type="date" class="eventPar" ng-model="newEventEndDate"><br><br>
                            
                            <div ng-click="addEvent()" class="createButton" style="margin-top:10px;">Create</div>
                        </div>
                    </div>
                    
            	</div>
        	</div>
            
        	<div ng-init="groupView=false" ng-show="groupView" id="groupView">
            	<div>
                	<br><br>
                    <input type="text" ng-model="newGroupName" placeholder="Group Name">
                    <br>
                    <label for="groupColor">Select a Color</label>
                    <select id="groupColor" ng-model="groupColor">
                    	<option value="#B9F5FF">Blue</option>
                    	<option value="#B5FBA3">Green</option>
                    	<option value="#FFA6B1">Red</option>
                    	<option value="#FEC12F">Orange</option>
                    </select>
                	<div ng-click="removeAllGroups()" class="btn2" style="margin-top:10px;">Remove All Groups</div>
                	<ul>
                    	<div ng-repeat="group in myGroupList track by $index" class ="groupSelect"  
                        ng-click="$parent.profileView=false; 
                                  $parent.groupView=false; 
                                  $parent.$parent.singleGroupView=true; 
                                  $parent.currentGroupId = group.id; 
                                  $parent.currentGroupColor = group.color;
                                  addGroup();" ng-attr-title="{{ group.name }}" 
                    	ng-style="{background:group.color}">
                            <p>{{ group.name | limitTo:12 }}{{ group.name.length >= 12 ? '...' : '' }}</p>
                        </div>
                        <div ng-click="createGroup()" id="addGroupBtn"></div>
                	</ul>
            	</div>
        	</div>
        </div> 
      </div> <!--END PROFILE CONTROLLER -->
        <!-- GROUP CONTROLLER -->
        <div class="singleGroupView" ng-init="singleGroupView=false" ng-show="singleGroupView">
            <div id="profileWrapper" ng-controller="GroupController">
                    <p id = "groupName">{{ groupName }}</p>
                    <div id="scheduleWrapper" style="border:solid black 1px;">
                        <p id="yourSched">Your Schedule</p>
                
                        <div class="schedule">
                            <!-- TEST UI CALENDAR -->
                             <div  ng-model="eventSources" calendar='groupCalendar' ui-calendar="uiConfig.calendar"  ></div> 
                            <br><br>
                        </div>
                    </div>
                    
                    <div id="createWrapper">
                        <p id="createTitle">Create Event</p>
                        <div class="createEvent">
                            <p>Event Name</p>
                            <input type="text" class="eventPar" ng-model="newEventName" placeholder="Event Name"><br><br>
                            
                            <p>Start Time</p>
                            <input type="time" class="eventPar" ng-model="lol" placeholder="wut"><br><br>
                            
                            <p>End Time</p>
                            <input type="time" class="eventPar" ng-model="lol2" placeholder="wut2"><br><br>
                            
                            <p>Start Date</p>
                            <input type="date" class="eventPar" ng-model="lol3" placeholder="wut3"><br><br>
                            
                            <p>End Date</p>
                            <input type="date" class="eventPar" ng-model="lol3" placeholder="wut3"><br><br>
                            
                            <div ng-click="" class="createButton" style="margin-top:10px;">Create</div>
                        </div>
                    </div>
                    
                
                    <p>Members in Group:</p>
                    <p ng-repeat="x in memberList track by $index"> {{x}} </p>
                    <br><br>
                    <div ng-click="addMember()" class="btn2" style="margin-top:10px;">Add New Member</div>
                    <input type="text" ng-model="newMemberEmail" placeholder="New Member Email">
                    <br><br>
            	
	            
            </div>   
        </div>
    </body>
</html>
