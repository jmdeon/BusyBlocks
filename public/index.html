<html>
    <head>
        <!-- Information about the document goes here
             This includes the encoding, title, css files, and JS files -->
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width,height=device-height,initial-scale=1.0">	
        <title>Scheduling App</title>
        
        <!-- Get access to Sweet Alert CSS -->
		<link rel="stylesheet" type="text/css" href="lib/sweet-alert.css"> 
        
        <!-- Get access to Sweet Alert JS -->
		<script src="lib/sweet-alert.min.js"></script> 
        <!-- Get access to jQuery libraries -->
		<script type="text/javascript" src="https://code.jquery.com/jquery-latest.min.js"></script>
        <!-- Get access to the Parse libraries -->
		<script type="text/javascript" src="https://www.parsecdn.com/js/parse-1.1.14.min.js"></script>
		
        <!-- Inline CSS goes here -->
        <style>
            body {
                margin: 0;
                font-family: 'Tahoma';
            }
            
            #header {
                width: 100%;
                height: 64px;
                position: fixed;
                background: #819FF7;
            }
            
            #content {
                width: 100%;
                height: 100%;
                background: #E0ECF8;
                top: 64px;
            }
            
            #getInWrapper {
				width: 325px;
				margin: auto;
				border-radius: 0 0 5px 5px;
				background: white;
				position: absolute;
				color: #2E64FE;
				padding: 0 0 20px 0;
				box-shadow: 2px 4px 6px #000;
				top: 0;
				left: 0;
				bottom: 0;
				right: 0;
                height: 320px;
			}
            
            .active {
                background: white;
                color: #2E64FE;
            }
			
			#options div {
				width: 50%;
				float: left;
				text-align: center;
				font-size: 30px;
                line-height: 40px;
                height: 40px;
			}
			
			#options div:hover {
				cursor: pointer;
			}
            
            .tips {
                position: relative;
                color: white;
                border: 2px solid #74DE74;
                background: #81F781;
                width: 90%;
                font-weight: 700;
            }
            
			input {
				line-height: 2em;
				border-radius: 3px;
				font-size: 16px;
				color: #575757;
				border: 1px solid #c6c6c6;
				width: 90%;
			}
            
            .btn {
                width: 90%;
                background: #819FF7;
                height: 40px;
                color: white;
                font-size: 30px;
                line-height: 40px;
            }
            
            .btn:hover {
                cursor: pointer;
                background: #2E64FE;
            }
        </style>
        
        <!-- Inline JS goes here -->
        <script> 
            $( document ).ready( function(){
                var sForm = document.getElementById( 'sForm' ), lForm = document.getElementById( 'lForm' );
                //Link to Parse database
                Parse.initialize( "t5hvXf3wJOYnL3MMIffsemMdhLM7f4brACcf0eBa", "UhqQaEDIEQr6cxhO8XS4Fl8BcGU4ir9jL9To7PVO" );
                
                $( '#options div' ).on( 'click', function() {
                    $( this ).siblings( 'div' ).css({ 'background':'#D8D8D8' });
                    this.style.background = 'white';
                    
                    if ( this.innerHTML == 'Log In' ) {
                        sForm.style.display = 'none';
                        lForm.style.display = 'block';
                    } else {
                        lForm.style.display = 'none';
                        sForm.style.display = 'block';
                    }
                });
            });
            
            function signup(){
                var  good = true, sName = document.getElementById( 'sName' ), sEmail = document.getElementById( 'sEmail' ), 
                sPass = document.getElementById( 'sPass' ), tips = document.getElementsByClassName( 'tips' ), 
                nameRegex = /^[a-z']([a-z'_\s])+$/i, emailRegex = /^[a-zA-Z0-9_.+-]+@[a-zA-Z0-9-]+\.[a-zA-Z0-9-.]+$/;
                
                good = good && checkLength( sName, 'name', 2, 25, 'sTips' );
                good = good && valInput( sName, nameRegex, 'name', 'sTips' );
                
                if ( good ) {
                    sName.style.border = '1px solid #81F781';
                }
                
                good = good && checkLength( sEmail, 'email', 6, 80, 'sTips' );
                good = good && valInput( sEmail, emailRegex, 'email', 'sTips' );
                
                if ( good ) {
                    sEmail.style.border = '1px solid #81F781';
                }
                
                good = good && checkLength( sPass, 'password', 5, 15, 'sTips' );
                
                if ( good ) {
                    sPass.style.border = '1px solid #81F781';
                
                    var user = new Parse.User(); 
                    
                    user.set( 'name', sName.value );
                    user.set( 'username', sEmail.value );
                    user.set( 'password', sPass.value );
                    
                    user.signUp(null, {
                        success: function( user ) {
                            $( '#sName, #sEmail, #sPass' ).val( '' );
                            
                            swal({
                                title: 'Awesome!',
                                text: 'You have successfully signed up!',
                                type: 'success',
                                confirmButtonColor: '#5858FA',
                                confirmButtonText: 'Go to my page!'
                            });
                            
                            tips.innerHTML = 'Please fill out the following fields';
                            tips.style.background = '#81F781';
                            tips.style.border = '2px solid #74DE74';
                            tips.style.color = 'black';
                        },
                        error: function( user ) {
                            tips.innerHTML = 'An account with this name already exists!';
                        }
                    });
                }
            }
                
            function login(){
                var lName = document.getElementById( 'lName' ), lPass = document.getElementById( 'lPass' );
                
                Parse.User.logIn( lName.value, lPass.value, {
                    success: function( user ) {
                        swal({
                            title: 'Awesome!',
                            text: 'Welcome back ' + Parse.User.current().get( "name" ) + '!',
                            type: 'success',
                            confirmButtonColor: '#5858FA',
                            confirmButtonText: 'Awww yeaaaa'
                        });
                    },
                    error: function( user ) {
                        swal({
                            title: 'Oops...',
                            text: 'We just accidently deleted your account. Please sign up again.',
                            type: 'error',
                            confirmButtonColor: '#5858FA',
                            confirmButtonText: '...Ok...'
                        });
                    }
                });
            }
            
            /************************************************************************
            * Name:			checkLength()
                
            * Purpose:		Checks to see if the length of a text field is within
                            bounds
                
            * Description:	Compares the field's input length to the max and min 
                            arguments.If invalid, turn border red, and call 
                            updateTips() with error message.
                                
            * Input:		var input - field that is being checked
                            var strName - Name of field being checked. Used in 
                                          updateTips() to show user where error is.
                            var min - The minimum number of characters the length of
                                      the input must be to be valid. Used in length
                                      checking and in updateTips() to show user length
                                      bounds.
                            var max - The maximum number of characters the length of
                                      the input can be to be valid. Used in length
                                      checking and in updateTips() to show user length
                                      bounds.
                                          
            * Result:		True if length of input is valid, false if not.
            ************************************************************************/
            function checkLength( input, strName, min, max, tipId ) {
                if ( input.value.length > max || input.value.length < min ) {
                    input.style.border = '1px solid #F78181';
                    updateTips( tipId, 'Length of ' + strName + ' must be between ' + min + ' and ' + max + ' characters!' );
                    return false;
                } else {
                    return true;
                }
            }
            
            /************************************************************************
            * Name:			updateTips()
            
            * Purpose:		Updates the value and css of the tip bar at the top of 
                            the form if there is an error
                            
            * Description:	Sets the value, background color, and border color of the
                            tip bar
                            
            * Input:		var newTip - The string to be displayed in the tip bar
            ************************************************************************/
            function updateTips( id, newTip ) {
                var tips = document.getElementById( id );
                //Change the text displayed to the argument
                tips.innerHTML = newTip;
                //Change the background-color and border color of the tips bar.
                tips.style.background = '#F78181';
                tips.style.border = '2px solid #DE7474';
                tips.style.color = 'white';
            }
            
            /************************************************************************
            * Name:			valInput()
                
            * Purpose:		Checks to see if input uses valid characters or not.
                            e.g. Name can't have numbers in it...like wtf bro...
                
            * Description:	Tests the field's input with a regex argument. If
                            not valid, it calls updateTips to display the error
                            message.
                                
            * Input:		var input - jQuery of field that is being checked
                            var name - Name of field being checked. Used in updateTips
                                       to show user where error is.
                            var valChar - The regex that the input is tested against.
                                          
            * Result:		True if length of input is valid, false if not.
            ************************************************************************/
            function valInput( input, valChar, name, tipId ) {
                if ( !( valChar.test( input.value ) ) ) {
                    updateTips( tipId, 'That doesn\'t look like an actual ' + name + '...but I don\'t judge' );
                    input.style.border = '1px solid #F78181';
                    return false;
                } else {
                    return true;
                }
            }
        </script>
    </head>
    <body>
        <div id="header">
            <h3 style="text-align:center;font-size:30px;font-weight:400;">Name of Company™</h3>
        </div>
        <div id="content">
            <div id="getInWrapper">
                <div id="options">
                    <div id="login">Log In</div>
                    <div id="signup" style="background:#D8D8D8;">Sign Up</div>
                </div>
                <center><br><br><div id="lForm" style="display:block;position:relative;top:20px;">
                    <div id="lTips" class="tips">Please fill in the following fields</div><br>
                    <input id="lName" type="text" placeholder="Email"><br><br>
                    <input id="lPass" type="password" placeholder="Password"><br><br>
                    <a href="">Forgot password</a>
                    <div onclick="login()" class="btn" style="margin-top:10px;">Log In</div>
                </div>
                <div id="sForm" style="display:none;position:relative;top:20px;">
                    <div id="sTips" class="tips">Please fill in the following fields</div><br>
                    <input id="sName" type="text" placeholder="Name"><br><br>
                    <input id="sEmail" type="email" placeholder="Email"><br><br>
                    <input id="sPass" type="password" placeholder="Password"><br><br>
                    <div onclick="signup()" class="btn">Sign Up</div>
                </div></center>
            </div>
        </div>
    </body>
</html>